{% extends "core/base.html" %}
{% load i18n %}
{% block title %}{% trans "Compare" %}{% endblock %}
{% block content %}
  <h1>{% trans "Compare" %}: {{ symbols|join:", " }}</h1>
  <img src="{{ chart_data_url }}" alt="Comparison chart" />
  <table>
    <thead>
      <tr>
        <th>{% trans "Symbol" %}</th>
        <th>{% trans "CAGR" %}</th>
        <th>{% trans "Volatility" %}</th>
        <th>{% trans "Sharpe" %}</th>
      </tr>
    </thead>
    <tbody>
      {% for s, m in metrics.items %}
      <tr>
        <td>{{ s }}</td>
        <td>{{ m.cagr|floatformat:2 }}</td>
        <td>{{ m.volatility|floatformat:2 }}</td>
        <td>{{ m.sharpe|floatformat:2 }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% if user.is_authenticated %}
  <form method="post" action="/saved">
    {% csrf_token %}
    <input type="hidden" name="type" value="compare" />
    <input type="hidden" name="symbols" value="{{ symbols|join:"," }}" />
    <label>Name: <input type="text" name="name" /></label>
    <button type="submit">Save compare set</button>
  </form>
  {% endif %}
{% endblock %}

